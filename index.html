<!doctype html>
<html lang="en">
	<head>
        <title>BMS real data</title>
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
        <script src='/socket.io/socket.io.js'></script>
        <script>
            var socket = io();

            socket.on('error', function(data) {
                addMessage('ERROR');
            });
            
            socket.on('data', function(data) {
                addMessage(data);
            });

            function addMessage(message) {
            	var komorka = message.split(";",3); 
            	var resultsTable = document.getElementById('table');

            	//usuwanie ostatniego wiersza
            	for(var i = 2; i < resultsTable.rows.length;){   
               		resultsTable.deleteRow(i);
            	}

                var row = resultsTable.insertRow(2);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
            	var cell3 = row.insertCell(2);
                cell1.innerHTML = komorka[0];
                cell2.innerHTML = komorka[1];
                cell3.innerHTML = komorka[2];
            }	
        </script>
    </head>
    <body>
    <div class="container">
        <ul id='messages'></ul>
		<table id="table" class="table table-hover">
			<tr>
				<td colspan="3">Last Flight Data</td>
			</tr>
			<tr>
				<td>Pitch</td>
				<td>Roll</td>
				<td>Yaw</td>
			</tr>
		</table>
        <p>
            <div class="progress" id="prog1">
              <div class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="30"
              aria-valuemin="0" aria-valuemax="100" style="width:70%">
              </div>
            </div>
            <div class="progress" id="prog2">
              <div class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="70"
              aria-valuemin="0" aria-valuemax="100" style="width:70%">
              </div>
            </div>

            <div class="progress" id="prog3">
              <div class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="90"
              aria-valuemin="0" aria-valuemax="100" style="width:90%">
              </div>
            </div>

        </p>
        </div>
    </body>
</html>